{% extends "base.html" %}

{% block page_title %}Adicionar Nota Fiscal{% endblock %}

{% block content %}
<div class="card" style="max-width: 600px; margin: 0 auto;">
    <div class="card-header">
        <h3 style="margin: 0;">Nova Nota Fiscal</h3>
    </div>
    
    <form method="POST" style="padding: 2rem;">
        {% if erro %}
        <div style="background-color: #f8d7da; color: #721c24; padding: 1rem; border-radius: 4px; margin-bottom: 1rem; border-left: 4px solid #dc3545;">
            <strong>❌ Erro:</strong> {{ erro }}
        </div>
        {% endif %}

        <div style="margin-bottom: 1.5rem;">
            <label for="codigo" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Número da Nota*</label>
            <input type="text" id="codigo" name="codigo" class="form-control" placeholder="Ex: NF-001" required>
        </div>

        <div style="margin-bottom: 1.5rem;">
            <label for="recebimento" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Data de Recebimento*</label>
            <input type="date" id="recebimento" name="recebimento" class="form-control" required>
        </div>

        <div style="margin-bottom: 1.5rem;">
            <label for="valor" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Valor (R$)*</label>
            <input type="number" id="valor" name="valor" class="form-control" placeholder="0.00" step="0.01" min="0" required>
        </div>

        <div style="margin-bottom: 1.5rem;">
            <label for="tipo" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Tipo</label>
            <input type="text" id="tipo" name="tipo" class="form-control" placeholder="Ex: Entrada, Saída...">
        </div>

        <div style="margin-bottom: 1.5rem;">
            <label for="descricao" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Descrição</label>
            <textarea id="descricao" name="descricao" class="form-control" placeholder="Digite uma descrição..." rows="4"></textarea>
        </div>

        <div style="margin-bottom: 1.5rem;">
            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                <input type="checkbox" id="pago" name="pago">
                <span style="font-weight: 500;">Marcado como Pago</span>
            </label>
        </div>

        <div style="margin-bottom: 1.5rem;">
            <label for="fornecedor_id" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Fornecedor</label>
            <select id="fornecedor_id" name="fornecedor_id" class="form-control">
                <option value="">Selecione um fornecedor (opcional)</option>
                {% for fornecedor in fornecedores %}
                <option value="{{ fornecedor.id }}">{{ fornecedor.nome }}</option>
                {% endfor %}
            </select>
        </div>

        <div style="display: flex; gap: 1rem;">
            <button type="submit" class="btn btn-primary" style="flex: 1;">Salvar Nota Fiscal</button>
            <a href="{{ url_for('finance.notas_fiscais') }}" class="btn btn-outline" style="flex: 1; text-align: center; text-decoration: none;">Cancelar</a>
        </div>
    </form>
</div>
{% endblock %}
